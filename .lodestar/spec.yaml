project:
  name: lodestar
  default_branch: main
  conventions:
    commit_style: conventional
    test_framework: pytest
tasks:
  F001:
    title: Initialize Typer CLI app with entry point
    description: M0 skeleton. Use Typer for CLI framework. Entry point is lodestar.
      Create src/lodestar/cli/ structure with app.py.
    acceptance_criteria:
    - lodestar command runs without error
    - lodestar --help displays available commands
    - --version flag works
    depends_on: []
    labels:
    - cli
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941178'
    updated_at: '2025-12-27T10:18:05.941184'
  F002:
    title: Implement lodestar init command
    description: M0 skeleton. Creates two-plane structure. spec.yaml has project name
      and empty tasks dict. AGENTS.md provides quick-start for agents.
    acceptance_criteria:
    - Creates .lodestar/spec.yaml with default structure
    - Creates .lodestar/.gitignore for runtime files
    - Creates root AGENTS.md with agent instructions
    - Command is idempotent - safe to run multiple times
    - Supports --json output
    depends_on: []
    labels:
    - cli
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941194'
    updated_at: '2025-12-27T10:18:05.941194'
  F003:
    title: Implement lodestar doctor command
    description: M0 skeleton. Health check command. Should detect common problems
      like missing files or corrupted database.
    acceptance_criteria:
    - Validates .lodestar directory exists
    - Validates spec.yaml is valid YAML and schema-conformant
    - Validates runtime.sqlite is accessible
    - Reports issues with suggested fixes
    - Supports --json output
    depends_on: []
    labels:
    - cli
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941200'
    updated_at: '2025-12-27T10:18:05.941200'
  F004:
    title: Implement lodestar status command
    description: M0 skeleton. Progressive discovery entry point. When run with no
      args lodestar should behave like status.
    acceptance_criteria:
    - Shows repo initialized status
    - Shows agent registration status
    - Shows task counts by status (ready/blocked/claimed/done/verified)
    - Shows active agent count
    - Suggests next actions (3-5 commands)
    - Supports --json output
    depends_on: []
    labels:
    - cli
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941205'
    updated_at: '2025-12-27T10:18:05.941205'
  F005:
    title: Implement spec plane with YAML schema
    description: M0 skeleton. Core spec plane. Use Pydantic v2 for models. spec.yaml
      is committed to git. Validate depends_on references exist.
    acceptance_criteria:
    - spec.yaml loads and validates against Pydantic schema
    - Project section with name and default_branch
    - Tasks dictionary with all required fields
    - Atomic file writes with portalocker
    - DAG cycle detection on save
    depends_on: []
    labels:
    - spec
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941209'
    updated_at: '2025-12-27T10:18:05.941209'
  F006:
    title: Implement runtime plane with SQLite WAL
    description: M0 skeleton. Core runtime plane. Use SQLite WAL for concurrent access.
      Tables agents/leases/messages/events(optional).
    acceptance_criteria:
    - runtime.sqlite created with WAL mode
    - agents table with schema from PRD
    - leases table with schema from PRD
    - messages table with schema from PRD
    - Database migrations framework
    - Gitignored automatically
    depends_on: []
    labels:
    - runtime
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941213'
    updated_at: '2025-12-27T10:18:05.941214'
  F007:
    title: Implement Pydantic models with JSON Schema export
    description: M0 skeleton. Models in src/lodestar/models/. Every command must support
      --schema to export its output schema.
    acceptance_criteria:
    - All spec models defined with Pydantic v2
    - All runtime models defined with Pydantic v2
    - JSON Schema export via --schema flag
    - Consistent JSON envelope structure (ok/data/next/warnings)
    depends_on: []
    labels:
    - models
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941218'
    updated_at: '2025-12-27T10:18:05.941218'
  F008:
    title: Implement --json and --explain flags for all commands
    description: M0 skeleton. Core CLI infrastructure. Use Rich for human output but
      disable for --json. --explain helps agents understand what commands do.
    acceptance_criteria:
    - All commands support --json flag
    - --json output uses consistent envelope structure
    - No ANSI codes in --json output
    - All commands support --explain flag
    - --explain returns agent-friendly command description
    depends_on: []
    labels:
    - cli
    - m0
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941224'
    updated_at: '2025-12-27T10:18:05.941225'
  F009:
    title: Implement lodestar agent join command
    description: M1 agent identity. Canonical entrypoint for agents. agent_id should
      be stable UUID. Store in runtime.sqlite agents table.
    acceptance_criteria:
    - Registers new agent with unique agent_id
    - Resumes existing agent if already registered
    - Returns agent_id in JSON response
    - Returns suggested next actions
    - Stores session_meta (tool name and model)
    - Supports --json output
    depends_on: []
    labels:
    - agent
    - m1
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941228'
    updated_at: '2025-12-27T10:18:05.941229'
  F010:
    title: Implement lodestar agent list command
    description: M1 agent identity. Show agents from runtime.sqlite. Active = last_seen_at
      within configurable window.
    acceptance_criteria:
    - Lists all registered agents
    - Shows agent_id and display_name and last_seen_at
    - Filters by active/inactive status
    - Supports --json output
    depends_on: []
    labels:
    - agent
    - m1
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941237'
    updated_at: '2025-12-27T10:18:05.941238'
  F011:
    title: Implement lodestar agent heartbeat command
    description: M1 agent identity. Updates agents.last_seen_at. Allows agents to
      signal they are still active.
    acceptance_criteria:
    - Updates last_seen_at for current agent
    - Returns time until next heartbeat needed
    - Can be called periodically by agent
    - Supports --json output
    depends_on: []
    labels:
    - agent
    - m1
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941241'
    updated_at: '2025-12-27T10:18:05.941242'
  F012:
    title: Implement lodestar agent brief command
    description: M1 agent identity. Used by orchestrator to spawn sub-agents. Brief
      should be self-contained context for task execution.
    acceptance_criteria:
    - Generates brief for specified task
    - Includes goal and acceptance criteria
    - Includes allowed paths/locks
    - Includes check commands
    - Supports --format flag (copilot/claude/generic)
    - Supports --json output
    depends_on: []
    labels:
    - agent
    - m1
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941246'
    updated_at: '2025-12-27T10:18:05.941246'
  F013:
    title: Implement lodestar task list command
    description: M2 tasks. Read from spec.yaml. Show which tasks are blocked vs ready.
      Cross-reference with runtime for claim status.
    acceptance_criteria:
    - Lists all tasks from spec.yaml
    - Shows task_id and title and status
    - Filters by status and labels
    - Shows dependency status
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941250'
    updated_at: '2025-12-27T10:18:05.941251'
  F014:
    title: Implement lodestar task show command
    description: M2 tasks. Merge spec and runtime data. Show which deps are satisfied
      vs pending.
    acceptance_criteria:
    - Shows full task details by ID
    - Shows all fields from spec
    - Shows current claim status from runtime
    - Shows dependency tree
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941254'
    updated_at: '2025-12-27T10:18:05.941255'
  F015:
    title: Implement lodestar task create command
    description: M2 tasks. Atomic write with portalocker. DAG validation is critical.
      Task IDs can be arbitrary strings or auto-generated.
    acceptance_criteria:
    - Creates new task in spec.yaml
    - Validates required fields
    - Validates depends_on references exist
    - Validates no DAG cycles created
    - Assigns unique task_id if not provided
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941258'
    updated_at: '2025-12-27T10:18:05.941259'
  F016:
    title: Implement lodestar task update command
    description: M2 tasks. Update any field except task_id. Re-validate DAG on dependency
      changes.
    acceptance_criteria:
    - Updates existing task fields
    - Validates field values
    - Validates no DAG cycles if depends_on changes
    - Atomic spec.yaml write
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941262'
    updated_at: '2025-12-27T10:18:05.941263'
  F017:
    title: Implement lodestar task next command
    description: M2 tasks. Core scheduling command. Must filter out expired leases.
      Include priority sorting.
    acceptance_criteria:
    - Returns only claimable tasks
    - Claimable = status ready AND all depends_on verified
    - Sorted by priority (lower number = higher priority)
    - Excludes tasks with active claims
    - Returns suggested claim command
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941266'
    updated_at: '2025-12-27T10:18:05.941267'
  F018:
    title: Implement lodestar task graph command
    description: M2 tasks. DAG visualization. Useful for external schedulers or debugging.
      Consider graphviz DOT format as --format dot.
    acceptance_criteria:
    - Exports task DAG as JSON
    - Optional DOT format output
    - Shows dependency relationships
    - Shows task statuses
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941270'
    updated_at: '2025-12-27T10:18:05.941271'
  F019:
    title: Implement DAG validation for task dependencies
    description: M2 tasks. Core spec validation. Use topological sort or DFS for cycle
      detection. Critical for task scheduling correctness.
    acceptance_criteria:
    - Detects cycles in depends_on graph
    - Validates all depends_on references exist
    - Runs on spec load and save
    - Returns clear error messages for violations
    - Prevents invalid spec from being saved
    depends_on: []
    labels:
    - spec
    - m2
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941276'
    updated_at: '2025-12-27T10:18:05.941276'
  F020:
    title: Implement lodestar task done command
    description: M2 tasks. Transition from claimed to done. Agent must hold the lease.
      Consider validation of acceptance criteria.
    acceptance_criteria:
    - Marks task status as done
    - Requires active claim by current agent
    - Releases the lease
    - Updates spec.yaml atomically
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941280'
    updated_at: '2025-12-27T10:18:05.941280'
  F021:
    title: Implement lodestar task verify command
    description: M2 tasks. Final task state. Verified tasks satisfy dependencies.
      May be done by different agent than implementer.
    acceptance_criteria:
    - Marks task status as verified
    - Verifies task was in done status
    - Updates spec.yaml atomically
    - Unlocks dependent tasks
    - Supports --json output
    depends_on: []
    labels:
    - task
    - m2
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941284'
    updated_at: '2025-12-27T10:18:05.941284'
  F022:
    title: Implement lodestar task claim command
    description: M3 leases. Core claim logic. Use SQLite transaction for atomicity.
      Check task status=ready AND deps satisfied AND no active lease.
    acceptance_criteria:
    - Creates lease for task with TTL
    - Only succeeds if task is claimable
    - Only succeeds if no active lease exists
    - Atomic transaction prevents race conditions
    - Default TTL is 15 minutes
    - Supports --ttl flag for custom TTL
    - Supports --json output
    depends_on: []
    labels:
    - lease
    - m3
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941287'
    updated_at: '2025-12-27T10:18:05.941288'
  F023:
    title: Implement lodestar task renew command
    description: M3 leases. Keep lease alive while working. Default renewal extends
      by same TTL as original claim.
    acceptance_criteria:
    - Extends lease expires_at
    - Only current lease holder can renew
    - Returns new expiration time
    - Supports --ttl flag for renewal duration
    - Supports --json output
    depends_on: []
    labels:
    - lease
    - m3
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941293'
    updated_at: '2025-12-27T10:18:05.941293'
  F024:
    title: Implement lodestar task release command
    description: M3 leases. Abandon work without marking done. Useful when agent cannot
      complete the task.
    acceptance_criteria:
    - Releases lease without completing task
    - Only current lease holder can release
    - Task becomes claimable again
    - Supports --json output
    depends_on: []
    labels:
    - lease
    - m3
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941296'
    updated_at: '2025-12-27T10:18:05.941297'
  F025:
    title: Implement automatic lease expiry handling
    description: M3 leases. Core expiry behavior. All queries that check for active
      leases must filter by expires_at > now. No daemon needed.
    acceptance_criteria:
    - Expired leases filtered out at read time
    - No background daemon required
    - task next excludes expired claims
    - Expired tasks become claimable
    - Consistent expiry logic across all commands
    depends_on: []
    labels:
    - lease
    - m3
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941300'
    updated_at: '2025-12-27T10:18:05.941301'
  F026:
    title: Implement concurrent claim atomicity
    description: M3 leases. Critical correctness requirement. Use SQLite BEGIN IMMEDIATE
      or EXCLUSIVE transaction. Test with multiprocessing.
    acceptance_criteria:
    - Two simultaneous claims result in exactly one success
    - SQLite transaction isolation
    - No race conditions in claim logic
    - Concurrency test passes with multiple processes
    depends_on: []
    labels:
    - lease
    - m3
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:18:05.941304'
    updated_at: '2025-12-27T10:18:05.941305'
  F027:
    title: Implement lodestar msg send command
    description: M4 messaging. Store from_agent_id and to_type and to_id. Text in
      --text flag. Optional meta as JSON.
    acceptance_criteria:
    - Sends message to agent or task thread
    - Supports --to agent:A1 format
    - Supports --to task:T123 format
    - Stores in runtime.sqlite messages table
    - Returns message_id
    - Supports --json output
    depends_on: []
    labels:
    - messaging
    - m4
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941309'
    updated_at: '2025-12-27T10:18:05.941309'
  F028:
    title: Implement lodestar msg inbox command
    description: M4 messaging. Filter by to_type=agent and to_id=current_agent_id.
      Cursor can be message_id or timestamp.
    acceptance_criteria:
    - Lists messages sent to current agent
    - Supports --since cursor for pagination
    - Returns messages in chronological order
    - Returns cursor for next page
    - Supports --json output
    depends_on: []
    labels:
    - messaging
    - m4
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941313'
    updated_at: '2025-12-27T10:18:05.941313'
  F029:
    title: Implement lodestar msg thread command
    description: M4 messaging. Filter by to_type=task and to_id=task_id. Thread allows
      agents to discuss a specific task.
    acceptance_criteria:
    - Lists messages for a task thread
    - Supports --since cursor for pagination
    - Returns messages in chronological order
    - Returns cursor for next page
    - Supports --json output
    depends_on: []
    labels:
    - messaging
    - m4
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941317'
    updated_at: '2025-12-27T10:18:05.941317'
  F030:
    title: Implement lodestar mcp serve command
    description: M5 optional. MCP server for agents that prefer tool calls. Use mcp
      SDK. Each CLI command becomes an MCP tool.
    acceptance_criteria:
    - Starts MCP server on stdio or socket
    - Exposes all CLI operations as MCP tools
    - Tools mirror CLI command structure
    - Local-only authentication
    - Supports --json output
    depends_on: []
    labels:
    - mcp
    - m5
    locks: []
    priority: 3
    status: deleted
    created_at: '2025-12-27T10:18:05.941323'
    updated_at: '2025-12-27T16:06:04.033073'
  F031:
    title: Implement lodestar export snapshot command
    description: For CI systems and external dashboards. Combine spec.yaml data with
      runtime.sqlite data into single snapshot.
    acceptance_criteria:
    - Exports combined spec and runtime state
    - Includes all tasks with claim status
    - Includes all active agents
    - Includes message counts
    - JSON format output
    - Useful for CI and external tools
    depends_on: []
    labels:
    - cli
    - m2
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:18:05.941328'
    updated_at: '2025-12-27T10:18:05.941329'
  TEST-001:
    title: Test task creation
    description: ''
    acceptance_criteria: []
    depends_on: []
    labels: []
    locks: []
    priority: 100
    status: verified
    created_at: '2025-12-27T10:18:05.941359'
    updated_at: '2025-12-27T10:18:13.535341'
  D001:
    title: Set up mkdocs with Material theme
    description: Initialize mkdocs project structure with Material theme. Create docs/
      directory, mkdocs.yml configuration, and basic navigation structure.
    acceptance_criteria: []
    depends_on: []
    labels:
    - docs
    - m6
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:25:16.712804'
    updated_at: '2025-12-27T10:36:58.624896'
  D002:
    title: Write getting started guide
    description: Document installation, quickstart, and first steps. Cover uv install,
      lodestar init, agent join, claiming first task.
    acceptance_criteria: []
    depends_on:
    - D001
    labels:
    - docs
    - m6
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T10:25:32.629762'
    updated_at: '2025-12-27T10:38:23.613196'
  D003:
    title: Document CLI command reference
    description: Auto-generate or manually document all CLI commands with examples.
      Use typer-cli or manual extraction. Include all flags and output examples.
    acceptance_criteria: []
    depends_on:
    - D001
    labels:
    - docs
    - m6
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:25:33.728180'
    updated_at: '2025-12-27T10:42:47.803255'
  D004:
    title: Document architecture and concepts
    description: Explain two-plane model, spec vs runtime, task lifecycle, lease mechanics,
      DAG scheduling. Include diagrams.
    acceptance_criteria: []
    depends_on:
    - D001
    labels:
    - docs
    - m6
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:25:34.890585'
    updated_at: '2025-12-27T10:45:30.251172'
  D005:
    title: Write agent workflow guide
    description: 'Document how agents should use lodestar: session start, claiming,
      working, completing, handoffs. Cover both human and AI agent workflows.'
    acceptance_criteria: []
    depends_on:
    - D002
    labels:
    - docs
    - m6
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T10:25:36.087490'
    updated_at: '2025-12-27T10:46:57.563052'
  D006:
    title: Set up docs build and deployment
    description: Configure GitHub Actions for mkdocs build. Set up GitHub Pages deployment.
      Add docs build to CI checks.
    acceptance_criteria: []
    depends_on:
    - D001
    labels:
    - docs
    - m6
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-27T10:25:37.271669'
    updated_at: '2025-12-27T10:48:37.109944'
  D007:
    title: Make README.md production ready for GitHub
    description: 'WHAT: Rewrite README.md to be a professional, production-ready landing
      page for the GitHub repository. Should attract users and clearly communicate
      value.


      WHERE: README.md (root)


      WHY: Current README is minimal placeholder. Need professional presence for public
      GitHub launch.


      ACCEPT:

      1) Has badges: PyPI version, CI status, docs link

      2) Clear value proposition explaining what Lodestar does and why

      3) Key features section highlighting: multi-agent coordination, lease-based
      claims, two-plane model, self-documenting CLI

      4) Installation section with uv and pip options

      5) Quick start that actually works (use ''uv run lodestar'' for dev)

      6) Link to full documentation (docs/ or GitHub Pages)

      7) Architecture overview mentioning spec.yaml vs runtime.sqlite

      8) Contributing section

      9) License section with link to LICENSE file


      CONTEXT:

      - See docs/index.md for landing page content to adapt

      - See docs/getting-started.md for installation/quickstart patterns

      - See docs/concepts/two-plane-model.md for architecture explanation

      - Package name is ''lodestar-cli'' on PyPI

      - CI is GitHub Actions (.github/workflows/)

      - Docs deploy to GitHub Pages'
    acceptance_criteria: []
    depends_on: []
    labels:
    - docs
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T13:15:53.183275'
    updated_at: '2025-12-27T13:22:58.344666'
  TEST-002:
    title: Implement webhook notification system
    description: Implement a webhook notification system based on the API design from
      TEST-001. Coordinate with the agent working on TEST-001 to clarify design decisions.
      Create a mock implementation with documentation.
    acceptance_criteria: []
    depends_on:
    - TEST-001
    labels:
    - feature
    locks: []
    priority: 2
    status: deleted
    created_at: '2025-12-27T14:48:37.441475'
    updated_at: '2025-12-27T19:39:12.745563'
  MSG-001:
    title: Fix or clarify task-scoped messaging
    description: 'PRIORITY: High. FROM: Agent communication test report (REPORT.md).
      ISSUE: ''lodestar msg thread task:<id>'' returns no messages even when agents
      discuss the task. Agents attempted ''--to task:<id>'' but messages didn''t appear
      in task threads. DECISION NEEDED: Either (1) fix task threading to work properly,
      or (2) remove the feature and document that direct agent-to-agent messaging
      is the primary pattern. ACCEPTANCE: Document the decision, update help text,
      ensure msg thread works or is removed, update docs/cli/msg.md with clarified
      usage patterns.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - messaging
    - m7
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T15:04:43.210080'
    updated_at: '2025-12-27T15:15:31.418218'
  MSG-002:
    title: Add message notification mechanism
    description: 'PRIORITY: High. FROM: Agent communication test report (REPORT.md).
      ISSUE: Agents poll ''lodestar msg inbox'' in loops with sleep delays, wasting
      cycles. SOLUTION: Add ''lodestar msg wait'' command that blocks until new message
      arrives. Also add message count to ''lodestar status'' output and ''--count''
      flag to ''msg inbox''. ACCEPTANCE: (1) Implement ''lodestar msg wait [--timeout
      SECONDS]'' that blocks on new messages, (2) Add message count to ''lodestar
      status'', (3) Add ''--count'' flag to ''msg inbox'', (4) Write tests for blocking
      behavior, (5) Update docs.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - messaging
    - m7
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T15:04:47.410231'
    updated_at: '2025-12-27T15:25:50.780781'
  AGT-001:
    title: Add agent metadata and discovery capabilities
    description: 'PRIORITY: High. FROM: Agent communication test report (REPORT.md).
      ISSUE: No way to discover what an agent specializes in. Agents can''t find the
      right collaborator easily. SOLUTION: (1) Add optional ''--role'' and ''--capabilities''
      fields to ''lodestar agent join'', (2) Store metadata in agents table, (3) Add
      ''lodestar agent find --capability <name>'' command, (4) Show metadata in ''lodestar
      agent list''. ACCEPTANCE: Extend agent join with optional metadata, implement
      agent find command, display metadata in agent list, update docs with examples
      of role/capability usage patterns.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - agent
    - m7
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T15:04:50.542272'
    updated_at: '2025-12-27T19:02:10.044313'
  MSG-003:
    title: Add message read status tracking
    description: 'PRIORITY: Medium. FROM: Agent communication test report (REPORT.md).
      ISSUE: No way for sender to know if recipient has read the message. SOLUTION:
      (1) Track when messages are retrieved by ''msg inbox'', (2) Add ''read_at''
      timestamp to messages table, (3) Add ''--show-read-status'' flag to ''msg inbox'',
      (4) Show read/unread indicator in inbox output. ACCEPTANCE: Database migration
      adds read_at field, inbox command updates read_at on retrieval, --show-read-status
      flag shows read timestamps, update JSON schema and docs.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - messaging
    - m7
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:04:53.836807'
    updated_at: '2025-12-27T15:27:13.777959'
  TSK-001:
    title: Enhance task status display with communication context
    description: 'PRIORITY: Medium. FROM: Agent communication test report (REPORT.md).
      ISSUE: When checking ''lodestar task show COMM-002'', there''s no indication
      of messages or agents working on related tasks. SOLUTION: (1) Show which agent
      is working on the task (from active lease), (2) Show message count related to
      task, (3) Display related agents who have sent messages about this task, (4)
      Add ''Related communications'' section to task show. ACCEPTANCE: task show includes
      current lease holder, message count, list of communicating agents, update docs
      with example output.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - task
    - m7
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:04:56.867433'
    updated_at: '2025-12-27T15:20:17.108116'
  DOC-001:
    title: Add agent coordination guide and templates
    description: 'PRIORITY: Medium. FROM: Agent communication test report (REPORT.md).
      NEED: Agents need guidance on coordination patterns. SOLUTION: Create docs/guides/agent-coordination.md
      with: (1) Example workflows for parallel agent work, (2) Message templates for
      common scenarios (requesting design, clarifying requirements, confirming completion),
      (3) Best practices for agent-to-agent communication, (4) Example multi-agent
      scenarios with full message flows. ACCEPTANCE: New guide created, covers discovery->communication->completion
      patterns, includes runnable examples, linked from main docs navigation.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - docs
    - m7
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:05:01.449174'
    updated_at: '2025-12-27T19:24:55.055430'
  MSG-004:
    title: Add message search and filtering
    description: 'PRIORITY: Low. FROM: Agent communication test report (REPORT.md).
      NEED: As agent conversations grow, finding specific messages becomes difficult.
      SOLUTION: (1) Add ''lodestar msg search --keyword <term>'' command, (2) Add
      ''--from <agent_id>'' filter to ''msg inbox'', (3) Add ''--since <date>'' and
      ''--until <date>'' filters, (4) Support combining filters. ACCEPTANCE: Implement
      msg search with keyword matching, add filtering options to inbox, support date
      range queries, update docs with search examples.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - messaging
    - m7
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-27T15:05:19.092843'
    updated_at: '2025-12-27T15:26:24.357336'
  AGT-002:
    title: Add agent availability status tracking
    description: 'PRIORITY: Low. FROM: Agent communication test report (REPORT.md).
      NEED: Know which agents are actively working vs idle. SOLUTION: (1) Add agent
      status field (active/idle/offline), (2) Auto-update status based on last activity,
      (3) Show status in ''agent list'', (4) Add configurable inactivity threshold.
      ACCEPTANCE: Extend agents table with status field, implement status calculation
      logic, display in agent list with color coding, make threshold configurable,
      update docs.'
    acceptance_criteria: []
    depends_on: []
    labels:
    - agent
    - m7
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-27T15:05:21.889544'
    updated_at: '2025-12-27T19:35:19.412910'
  F032:
    title: Implement lodestar task delete command
    description: 'Add task deletion with soft-delete semantics:

      - Implement as state change (status=''deleted''), not physical removal

      - If task is depended on by other tasks, exit gracefully with notice listing
      dependents

      - If task has downstream dependencies (depends_on this task), cascade delete
      them

      - Hide deleted tasks from task list by default

      - Add --include-deleted flag to task list to show deleted tasks

      - Add --cascade flag to explicitly confirm cascade deletion

      - Update task show to indicate if task is deleted'
    acceptance_criteria: []
    depends_on: []
    labels:
    - feature
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T15:46:04.462731'
    updated_at: '2025-12-27T15:55:00.110019'
  D010:
    title: Update CLI documentation for task delete command
    description: 'Update docs/cli/task.md to document:

      - lodestar task delete <id> command

      - --cascade flag behavior

      - Soft-delete semantics and how deleted tasks are hidden

      - --include-deleted flag on task list

      - Error messages when task has dependents

      - Examples of cascade deletion'
    acceptance_criteria: []
    depends_on:
    - F032
    labels:
    - docs
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:46:13.609680'
    updated_at: '2025-12-27T15:57:38.936251'
  D011:
    title: Update README for task delete feature
    description: 'Update README.md CLI reference section to include:

      - lodestar task delete command in quick reference

      - Brief description of soft-delete behavior

      - Update any task lifecycle mentions to include deletion'
    acceptance_criteria: []
    depends_on:
    - F032
    labels:
    - docs
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:46:21.334152'
    updated_at: '2025-12-27T15:58:37.530002'
  D012:
    title: Update CLAUDE.md CLI reference for task delete
    description: 'Update CLAUDE.md to include:

      - lodestar task delete command in CLI Command Reference section

      - Note about soft-delete behavior in Critical Patterns if relevant'
    acceptance_criteria: []
    depends_on:
    - F032
    labels:
    - docs
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T15:46:28.943346'
    updated_at: '2025-12-27T16:00:21.798330'
  TEST-DELETE-PARENT:
    title: Parent task for delete test
    description: ''
    acceptance_criteria: []
    depends_on: []
    labels: []
    locks: []
    priority: 100
    status: deleted
    created_at: '2025-12-27T16:06:28.579960'
    updated_at: '2025-12-27T16:06:44.562064'
  TEST-DELETE-CHILD1:
    title: Child 1 for delete test
    description: ''
    acceptance_criteria: []
    depends_on:
    - TEST-DELETE-PARENT
    labels: []
    locks: []
    priority: 100
    status: deleted
    created_at: '2025-12-27T16:06:29.740773'
    updated_at: '2025-12-27T16:06:44.562082'
  TEST-DELETE-CHILD2:
    title: Child 2 for delete test
    description: ''
    acceptance_criteria: []
    depends_on:
    - TEST-DELETE-PARENT
    labels: []
    locks: []
    priority: 100
    status: deleted
    created_at: '2025-12-27T16:06:31.371286'
    updated_at: '2025-12-27T16:06:44.562085'
  SQL-001:
    title: Add SQLAlchemy and Alembic dependencies
    description: Add sqlalchemy>=2.0.0 and alembic>=1.13.0 to pyproject.toml dependencies.
      Run 'uv sync' to install. Verify with 'python -c "import sqlalchemy; import
      alembic; print(sqlalchemy.__version__, alembic.__version__)"'
    acceptance_criteria: []
    depends_on: []
    labels:
    - feature
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-27T19:52:56.855957'
    updated_at: '2025-12-27T19:55:50.055397'
  SQL-002:
    title: Create SQLAlchemy ORM models
    description: 'Create src/lodestar/runtime/models.py with SQLAlchemy ORM model
      definitions:


      1. Create Base class (DeclarativeBase)

      2. Create JSONField TypeDecorator for JSON storage in TEXT columns

      3. Create SchemaVersion model for version tracking

      4. Create AgentModel with fields: agent_id (PK), display_name, role, created_at,
      last_seen_at, capabilities (JSON list), session_meta (JSON dict)

      5. Create LeaseModel with fields: lease_id (PK), task_id, agent_id (FK), created_at,
      expires_at. Add indexes on task_id, agent_id, expires_at

      6. Create MessageModel with fields: message_id (PK), created_at, from_agent_id
      (FK), to_type, to_id, text, meta (JSON), read_at. Add composite index on (to_type,
      to_id) and indexes on from_agent_id, created_at

      7. Create EventModel with fields: event_id (autoincrement PK), created_at, event_type,
      agent_id, task_id, data (JSON). Add indexes on created_at, event_type


      Key design: Use String type for datetime fields (ISO format) to maintain compatibility
      with existing data patterns. Add relationships between models.'
    acceptance_criteria: []
    depends_on:
    - SQL-001
    labels:
    - feature
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T19:52:58.046756'
    updated_at: '2025-12-27T19:56:50.033310'
  SQL-003:
    title: Create engine and session factory module
    description: "Create src/lodestar/runtime/engine.py with SQLAlchemy engine and\
      \ session management:\n\n1. create_runtime_engine(db_path: Path) function:\n\
      \   - Create SQLAlchemy engine with sqlite:/// URL\n   - Disable connection\
      \ pooling (poolclass=None) for CLI tool\n   - Register event listener to enable\
      \ WAL mode on connect: PRAGMA journal_mode=WAL and PRAGMA busy_timeout=5000\n\
      \n2. create_session_factory(engine) function:\n   - Return sessionmaker bound\
      \ to engine with expire_on_commit=False\n\n3. get_session(session_factory) context\
      \ manager:\n   - Yield session\n   - Auto-commit on success\n   - Auto-rollback\
      \ on exception\n   - Always close session in finally block\n\nThis replicates\
      \ the transaction semantics of the current _connect() context manager."
    acceptance_criteria: []
    depends_on:
    - SQL-001
    labels:
    - feature
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T19:52:59.157273'
    updated_at: '2025-12-27T19:57:44.848911'
  SQL-004:
    title: Create Pydantic to SQLAlchemy converters
    description: "Create src/lodestar/runtime/converters.py with bidirectional conversion\
      \ functions between Pydantic models (in models/runtime.py) and SQLAlchemy ORM\
      \ models (in runtime/models.py):\n\n1. agent_to_orm(agent: Agent) -> AgentModel:\n\
      \   - Convert datetime fields to ISO format strings\n   - Pass capabilities\
      \ list and session_meta dict directly (JSONField handles serialization)\n\n\
      2. orm_to_agent(model: AgentModel) -> Agent:\n   - Convert ISO strings back\
      \ to datetime objects\n   - Handle backward compatibility: if capabilities is\
      \ not a list, default to empty list\n   - Default role to empty string if None\n\
      \n3. lease_to_orm(lease: Lease) -> LeaseModel:\n   - Convert datetime fields\
      \ to ISO format strings\n\n4. orm_to_lease(model: LeaseModel) -> Lease:\n  \
      \ - Convert ISO strings back to datetime objects\n\n5. message_to_orm(message:\
      \ Message) -> MessageModel:\n   - Convert to_type enum to string value\n   -\
      \ Convert read_at to ISO string or None\n\n6. orm_to_message(model: MessageModel)\
      \ -> Message:\n   - Convert to_type string to MessageType enum\n   - Handle\
      \ None read_at\n\nImport models from lodestar.models.runtime and lodestar.runtime.models."
    acceptance_criteria: []
    depends_on:
    - SQL-002
    labels:
    - feature
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-27T19:53:25.308714'
    updated_at: '2025-12-27T19:59:19.143725'
  SQL-005:
    title: Setup Alembic configuration and directory structure
    description: "Configure Alembic for database migrations:\n\n1. Create alembic.ini\
      \ in project root with:\n   - script_location = src/lodestar/runtime/alembic\n\
      \   - prepend_sys_path = src\n   - Default sqlalchemy.url = sqlite:///.lodestar/runtime.sqlite\n\
      \   - Standard logging configuration\n\n2. Create src/lodestar/runtime/alembic/\
      \ directory\n\n3. Create src/lodestar/runtime/alembic/env.py:\n   - Import Base.metadata\
      \ from lodestar.runtime.models\n   - get_url() function that checks LODESTAR_RUNTIME_DB_URL\
      \ env var, then falls back to find_lodestar_root()\n   - Standard run_migrations_offline()\
      \ and run_migrations_online() functions\n   - Use NullPool for online migrations\n\
      \n4. Create src/lodestar/runtime/alembic/script.py.mako with standard Alembic\
      \ template\n\n5. Create empty src/lodestar/runtime/alembic/versions/ directory\n\
      \nVerify with: uv run alembic --help (should show alembic commands)"
    acceptance_criteria: []
    depends_on:
    - SQL-002
    labels:
    - feature
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-27T19:53:26.532108'
    updated_at: '2025-12-27T20:00:27.657865'
  SQL-006:
    title: Create initial Alembic migration
    description: "Create the initial Alembic migration that creates the database schema:\n\
      \nCreate src/lodestar/runtime/alembic/versions/001_initial_schema.py:\n\n1.\
      \ Set revision = '001', down_revision = None\n\n2. upgrade() function creates\
      \ all tables:\n   - schema_version: version (INTEGER PK)\n   - agents: agent_id\
      \ (PK), display_name, role, created_at, last_seen_at, capabilities (TEXT JSON),\
      \ session_meta (TEXT JSON)\n   - leases: lease_id (PK), task_id, agent_id (FK\
      \ to agents), created_at, expires_at + indexes on task_id, agent_id, expires_at\n\
      \   - messages: message_id (PK), created_at, from_agent_id (FK), to_type, to_id,\
      \ text, meta (TEXT JSON), read_at + composite index on (to_type, to_id), indexes\
      \ on from_agent_id, created_at\n   - events: event_id (INTEGER AUTOINCREMENT\
      \ PK), created_at, event_type, agent_id, task_id, data (TEXT JSON) + indexes\
      \ on created_at, event_type\n\n3. downgrade() function drops all tables in reverse\
      \ order\n\nTest: Create a temp database and verify 'uv run alembic upgrade head'\
      \ creates all tables with correct schema."
    acceptance_criteria: []
    depends_on:
    - SQL-005
    labels:
    - feature
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-27T19:53:27.695108'
    updated_at: '2025-12-27T20:01:32.012543'
  SQL-007:
    title: Refactor RuntimeDatabase to use SQLAlchemy
    description: 'Refactor src/lodestar/runtime/database.py to use SQLAlchemy ORM
      instead of raw sqlite3:


      CRITICAL: Keep the same public interface - all method signatures must remain
      unchanged so CLI commands don''t need modification.


      Key changes:

      1. __init__(): Create engine and session_factory instead of storing db_path
      only

      2. Replace _connect() usage with get_session(self._session_factory)

      3. _ensure_initialized(): Use Base.metadata.create_all(self._engine) instead
      of manual CREATE TABLE


      Agent operations (refactor all):

      - register_agent(): Use session.add(agent_to_orm(agent))

      - get_agent(): Use select(AgentModel).where(...), return orm_to_agent()

      - list_agents(): Use select(AgentModel).order_by(), convert all results

      - find_agents_by_capability(): Use raw SQL with text() for json_each() SQLite
      function

      - find_agents_by_role(): Use select().where(AgentModel.role == role)

      - update_heartbeat(): Use session.execute(update(AgentModel).where(...).values(...))


      Lease operations (CRITICAL - maintain atomicity):

      - create_lease(): Within single session, check for existing active lease, then
      insert. Must remain atomic to prevent race conditions.

      - get_active_lease(): Filter by expires_at > now.isoformat()

      - get_agent_leases(): Filter by agent_id

      - renew_lease(): Update expires_at

      - release_lease(): Set expires_at to now


      Message operations (refactor all):

      - send_message(), get_inbox(), get_task_thread(), get_task_message_count(),
      get_task_message_agents(), search_messages(), get_inbox_count(), wait_for_message()


      Stats operations:

      - get_stats(): Use func.count() aggregations

      - get_agent_message_counts(): Use GROUP BY with func.count()


      Internal:

      - _log_event(): Accept session as first parameter to work within existing transaction

      - Remove _create_schema(), _run_migrations(), SCHEMA_VERSION constant (Alembic
      handles this now)


      Test incrementally: Run ''uv run pytest tests/test_runtime.py'' frequently during
      refactor.'
    acceptance_criteria: []
    depends_on:
    - SQL-003
    - SQL-004
    - SQL-006
    labels:
    - feature
    locks: []
    priority: 4
    status: verified
    created_at: '2025-12-27T19:54:08.070867'
    updated_at: '2025-12-27T20:05:16.418368'
  SQL-008:
    title: Update runtime tests for SQLAlchemy
    description: "Update tests/test_runtime.py to work with the new SQLAlchemy-based\
      \ RuntimeDatabase:\n\n1. Most tests should pass without changes since the public\
      \ interface is unchanged\n\n2. Update test_expired_lease_not_active (or similar\
      \ tests that access db._connect()):\n   - Replace: with db._connect() as conn:\
      \ conn.execute(...)\n   - With: from lodestar.runtime.engine import get_session;\
      \ from lodestar.runtime.converters import lease_to_orm; with get_session(db._session_factory)\
      \ as session: session.add(lease_to_orm(lease))\n\n3. Add new tests for SQLAlchemy-specific\
      \ functionality:\n   - Test WAL mode is enabled: Execute 'PRAGMA journal_mode'\
      \ and verify returns 'wal'\n   - Test session rollback on exception\n   - Test\
      \ JSONField serialization/deserialization edge cases (empty list, None handling)\n\
      \n4. Run full test suite: uv run pytest tests/test_runtime.py -v\n\n5. Ensure\
      \ all 40+ existing tests pass"
    acceptance_criteria: []
    depends_on:
    - SQL-007
    labels:
    - test
    locks: []
    priority: 5
    status: verified
    created_at: '2025-12-27T19:54:09.237030'
    updated_at: '2025-12-27T20:05:30.533008'
  SQL-009:
    title: End-to-end verification and cleanup
    description: "Final verification and cleanup after SQLAlchemy migration:\n\n1.\
      \ Delete existing .lodestar/runtime.sqlite if present (clean migration)\n\n\
      2. Run full test suite:\n   - uv run pytest (all tests should pass)\n   - uv\
      \ run ruff check src tests\n   - uv run ruff format --check src tests\n\n3.\
      \ Test CLI commands manually:\n   - uv run lodestar init (in temp directory)\n\
      \   - uv run lodestar agent join\n   - uv run lodestar task create --title 'Test\
      \ task'\n   - uv run lodestar task claim <id>\n   - uv run lodestar task release\
      \ <id>\n   - uv run lodestar msg send --to agent:<id> --text 'Test'\n   - uv\
      \ run lodestar status\n\n4. Verify Alembic autogenerate detects no drift:\n\
      \   - uv run alembic revision --autogenerate -m 'check' (should show 'No changes')\n\
      \   - Delete the generated empty migration\n\n5. Update runtime/__init__.py\
      \ if additional exports needed\n\n6. Optional: Add 'alembic' to .gitignore if\
      \ it creates any cache files\n\n7. Update documentation if runtime internals\
      \ are mentioned anywhere\n\nCommit message: 'feat: Migrate runtime database\
      \ to SQLAlchemy ORM with Alembic migrations'"
    acceptance_criteria: []
    depends_on:
    - SQL-008
    labels:
    - test
    locks: []
    priority: 6
    status: verified
    created_at: '2025-12-27T19:54:10.431185'
    updated_at: '2025-12-27T20:08:07.952636'
  D020:
    title: Document PRD context feature in task.md
    description: "WHAT: Document the new PRD context feature in the CLI task reference.\n\
      WHERE: docs/cli/task.md\nWHY: PRD_REFS.md feature is implemented but not documented\
      \ - agents need to know how to use prd_refs, prd_excerpt, and prd_hash on tasks.\n\
      \nACCEPT:\n1) Add 'task context' command section with full documentation\n2)\
      \ Update 'task create' section to show --prd-source, --prd-ref, --prd-excerpt\
      \ options  \n3) Update 'task claim' section to document context bundle and --no-context\
      \ flag\n4) Include examples of creating tasks with PRD context attached\n5)\
      \ Explain drift detection warnings\n\nCONTEXT:\n- See src/lodestar/models/spec.py\
      \ for PrdContext and PrdRef models\n- See src/lodestar/cli/commands/task.py\
      \ for task_context and task_claim implementations\n- See src/lodestar/util/prd.py\
      \ for hash and extraction utilities\n- PRD_REFS.md explains the motivation for\
      \ this feature"
    acceptance_criteria: []
    depends_on: []
    labels:
    - docs
    - prd-context
    locks: []
    priority: 1
    status: verified
    created_at: '2025-12-28T01:05:42.370433+00:00'
    updated_at: '2025-12-28T01:11:54.496369+00:00'
  D021:
    title: Document PRD context concepts
    description: "WHAT: Add new concepts documentation explaining PRD context integration.\n\
      WHERE: docs/concepts/ (new file: prd-context.md)\nWHY: PRD_REFS.md describes\
      \ a major feature - 'PRD section pointers + context delivery' - that needs conceptual\
      \ documentation for users to understand WHY this exists and HOW it works.\n\n\
      ACCEPT:\n1) Create docs/concepts/prd-context.md with:\n   - Overview: PRD =\
      \ encyclopedia, task = mission card\n   - prd_refs field explanation (anchors,\
      \ line ranges)\n   - prd_excerpt frozen snapshot concept\n   - prd_hash drift\
      \ detection mechanism\n2) Update docs/concepts/index.md to link to new page\n\
      3) Explain the claim-time context delivery workflow\n4) Include diagrams/examples\
      \ showing task creation with PRD context\n\nCONTEXT:\n- PRD_REFS.md section\
      \ 'A concrete shape that combines the strongest ideas' is the design doc\n-\
      \ src/lodestar/models/spec.py has PrdContext and PrdRef models  \n- Feature\
      \ solves: 'future sessions never need the PRD at all for most tasks'"
    acceptance_criteria: []
    depends_on:
    - D020
    labels:
    - docs
    - prd-context
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-28T01:06:00.114359+00:00'
    updated_at: '2025-12-28T01:19:11.418461+00:00'
  D022:
    title: Update README.md with PRD context feature
    description: 'WHAT: Add PRD context feature to README.md Quick Start and Key Features.

      WHERE: README.md

      WHY: README is the first thing users see - it should mention this major differentiating
      feature.


      ACCEPT:

      1) Add ''PRD Context Delivery'' to Key Features list with brief description

      2) Update Quick Start to show creating a task WITH prd context (optional advanced
      example)

      3) Add example of ''lodestar task context <id>'' in How It Works section

      4) Mention drift detection as a feature


      CONTEXT:

      - Current README has no mention of PRD context features

      - Keep changes minimal - README should stay concise

      - Focus on: what the feature does, one-line CLI example

      - See PRD_REFS.md for feature motivation'
    acceptance_criteria: []
    depends_on:
    - D020
    labels:
    - docs
    - prd-context
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-28T01:06:10.692893+00:00'
    updated_at: '2025-12-28T01:19:12.330430+00:00'
  D023:
    title: Update agent-workflow guide for PRD context
    description: "WHAT: Update agent workflow guide to incorporate PRD context best\
      \ practices.\nWHERE: docs/guides/agent-workflow.md\nWHY: Agents need guidance\
      \ on how to leverage PRD context when claiming and working on tasks.\n\nACCEPT:\n\
      1) Add section: 'Understanding Task Context' explaining prd_refs/excerpt\n2)\
      \ Update 'Claiming a Task' section to mention context bundle delivery\n3) Add\
      \ best practice: 'Always check for PRD drift warnings'\n4) Show example workflow:\
      \ claim task -> review context -> work -> done\n5) Add tip about using 'task\
      \ context' to get full PRD snippets\n\nCONTEXT:\n- docs/guides/agent-workflow.md\
      \ exists but doesn't mention PRD context\n- task claim now automatically includes\
      \ context (unless --no-context)\n- This is key for planning\u2192executing agent\
      \ handoffs"
    acceptance_criteria: []
    depends_on:
    - D021
    labels:
    - docs
    - prd-context
    locks: []
    priority: 2
    status: verified
    created_at: '2025-12-28T01:06:22.321870+00:00'
    updated_at: '2025-12-28T01:20:17.642496+00:00'
  D024:
    title: Update docs/index.md with PRD context overview
    description: 'WHAT: Update the docs landing page to mention PRD context feature.

      WHERE: docs/index.md

      WHY: The docs landing page lists features but is missing this key capability.


      ACCEPT:

      1) Add ''PRD Context Delivery'' to Features list

      2) Update Quick Start section if it references task claiming

      3) Ensure consistency with README.md feature list


      CONTEXT:

      - Current docs/index.md has minimal content

      - Keep changes proportional to existing content

      - Link to concepts/prd-context.md if it exists'
    acceptance_criteria: []
    depends_on:
    - D021
    labels:
    - docs
    - prd-context
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-28T01:06:32.734638+00:00'
    updated_at: '2025-12-28T01:20:18.468885+00:00'
  D025:
    title: Update getting-started.md with task context example
    description: "WHAT: Add PRD context examples to getting started guide.\nWHERE:\
      \ docs/getting-started.md\nWHY: New users should see the task context workflow\
      \ early.\n\nACCEPT:\n1) Add optional 'Advanced: Creating Tasks with PRD Context'\
      \ section\n2) Show example of 'lodestar task context <id>'  \n3) Explain when/why\
      \ to use PRD context (planning agent \u2192 executing agent handoff)\n4) Keep\
      \ core quick start flow unchanged (don't bloat the happy path)\n\nCONTEXT:\n\
      - getting-started.md is for first-time users\n- PRD context is optional - don't\
      \ make it required to understand\n- Place advanced content at end or in collapsible\
      \ section"
    acceptance_criteria: []
    depends_on:
    - D020
    labels:
    - docs
    - prd-context
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-28T01:06:46.575592+00:00'
    updated_at: '2025-12-28T01:19:13.144378+00:00'
  D026:
    title: Add PRD context reference schema documentation
    description: "WHAT: Document the PrdContext and PrdRef schema in reference docs.\n\
      WHERE: docs/reference/index.md (or new docs/reference/schemas.md)\nWHY: Programmatic\
      \ users need schema reference for spec.yaml prd fields.\n\nACCEPT:\n1) Document\
      \ PrdContext fields: source, refs, excerpt, prd_hash\n2) Document PrdRef fields:\
      \ anchor, lines  \n3) Show example spec.yaml task with full prd context\n4)\
      \ Document JSON output format from 'task context --json'\n5) Include schema\
      \ export example using --schema flag\n\nCONTEXT:\n- Reference docs should be\
      \ complete and precise\n- See src/lodestar/models/spec.py for canonical schema\n\
      - PRD_REFS.md 'Example (illustrative YAML)' section shows target format"
    acceptance_criteria: []
    depends_on:
    - D021
    labels:
    - docs
    - prd-context
    locks: []
    priority: 3
    status: verified
    created_at: '2025-12-28T01:06:57.736880+00:00'
    updated_at: '2025-12-28T01:20:19.248872+00:00'
features:
  m0-skeleton:
  - F001
  - F002
  - F003
  - F004
  - F005
  - F006
  - F007
  - F008
  m1-agent-identity:
  - F009
  - F010
  - F011
  - F012
  m2-tasks:
  - F013
  - F014
  - F015
  - F016
  - F017
  - F018
  - F019
  - F020
  - F021
  - F031
  m3-leases:
  - F022
  - F023
  - F024
  - F025
  - F026
  m4-messaging:
  - F027
  - F028
  - F029
  m5-mcp:
  - F030
  m6-docs:
  - D001
  - D002
  - D003
  - D004
  - D005
  - D006
